<!-- Hero Start 1 -->
<div class="container-xxl py-5">
    <div class="container p-0 mb-2">
        <div class="row align-items-center">
            <!-- Carousel Section -->
            <div class="col-lg-6 events">
                <div class="owl-carousel header-carousel position-relative">
                    <!-- Carousel Item 1 -->
                    <div class="owl-carousel-item position-relative">
                        <img class="img-fluid" src="{% static 'media/carousel-1.jpg' %}" alt="">
                        <div class="position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center" style="background: rgba(0, 0, 0, .2);">
                            <div class="container">
                                <div class="row justify-content-start">
                                    <div class="col-10 col-lg-8">
                                        <h1 class="display-6 text-white animated slideInDown mb-4">The Best Kindergarten School For Your Child</h1>
                                        <p class="fs-5 fw-medium text-white mb-4 pb-2">Vero elitr justo clita lorem. Ipsum dolor at sed stet sit diam no. Kasd rebum ipsum et diam justo clita et kasd rebum sea elitr.</p>
                                        <a href="" class="btn btn-primary rounded-pill py-sm-3 px-sm-5 me-3 animated slideInLeft">Learn More</a>
                                        <a href="" class="btn btn-dark rounded-pill py-sm-3 px-sm-5 animated slideInRight">Our Classes</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Carousel Item 2 -->
                    <div class="owl-carousel-item position-relative">
                        <img class="img-fluid" src="{% static 'media/carousel-2.jpg' %}" alt="">
                        <div class="position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center" style="background: rgba(0, 0, 0, .2);">
                            <div class="container">
                                <div class="row justify-content-start">
                                    <div class="col-10 col-lg-8">
                                        <h1 class="display-6 text-white animated slideInDown mb-4">Make A Brighter Future For Your Child</h1>
                                        <p class="fs-5 fw-medium text-white mb-4 pb-2">Vero elitr justo clita lorem. Ipsum dolor at sed stet sit diam no. Kasd rebum ipsum et diam justo clita et kasd rebum sea elitr.</p>                                            
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>                                        

                </div>
            </div>

            <!-- Scrollable Sidebar Section -->
            <div class="col-lg-6 latest-news" style="border-radius:1.5rem; border:1px solid black;">
                <div class="scrollable-sidebar px-4 py-2" style="height: 380px; overflow-y: auto;">
                    <!-- First Sidebar Item -->
                    <div class="sidebar-item mb-2 p-2" style="background-color: rgb(224, 217, 205);border-radius:1.5rem;">
                        <h3>Tempor erat elitr rebum at clita.</h3>
                        <p>Tempor erat elitr rebum at clita. Diam dolor diam ipsum sit. Aliqu diam amet diam et eos. Clita erat ipsum et lorem et sit, sed stet lorem sit clita duo justo magna dolore erat amet</p>
                        <div class="timing" style="display: flex; justify-content: space-between; align-items: center;">
                            <h3>Time</h3>
                            <p>This is the date</p>
                        </div>
                    </div>

                    <!-- Second Sidebar Item -->
                    <div class="sidebar-item mb-2 p-2" style="background-color: rgb(157, 154, 149);border-radius:1.5rem;">
                        <h3>Tempor erat elitr rebum at clita.</h3>
                        <p>Tempor erat elitr rebum at clita. Diam dolor diam ipsum sit. Aliqu diam amet diam et eos. Clita erat ipsum et lorem et sit, sed stet lorem sit clita duo justo magna dolore erat amet</p>
                    </div>

                    <!-- Third Sidebar Item -->
                    <div class="sidebar-item mb-2 p-2">
                        <h3>Tempor erat elitr rebum at clita.</h3>
                        <p>Tempor erat elitr rebum at clita. Diam dolor diam ipsum sit. Aliqu diam amet diam et eos. Clita erat ipsum et lorem et sit, sed stet lorem sit clita duo justo magna dolore erat amet</p>
                    </div>
                    <div class="sidebar-item mb-2 p-2">
                        <h3>Tempor erat elitr rebum at clita.</h3>
                        <p>Tempor erat elitr rebum at clita. Diam dolor diam ipsum sit. Aliqu diam amet diam et eos. Clita erat ipsum et lorem et sit, sed stet lorem sit clita duo justo magna dolore erat amet</p>
                        <div class="timing" style="display: flex; justify-content: space-between; align-items: center;">
                            <h3>Time</h3>
                            <p>This is the date</p>
                        </div>
                    </div>
                    <div class="sidebar-item mb-2 p-2">
                        <h3>Tempor erat elitr rebum at clita.</h3>
                        <p>Tempor erat elitr rebum at clita. Diam dolor diam ipsum sit. Aliqu diam amet diam et eos. Clita erat ipsum et lorem et sit, sed stet lorem sit clita duo justo magna dolore erat amet</p>
                        <div class="timing" style="display: flex; justify-content: space-between; align-items: center;">
                            <h3>Time</h3>
                            <p>This is the date</p>
                        </div>
                    </div>
                    <div class="sidebar-item mb-2 p-2">
                        <h3>Tempor erat elitr rebum at clita.</h3>
                        <p>Tempor erat elitr rebum at clita. Diam dolor diam ipsum sit. Aliqu diam amet diam et eos. Clita erat ipsum et lorem et sit, sed stet lorem sit clita duo justo magna dolore erat amet</p>
                        <div class="timing" style="display: flex; justify-content: space-between; align-items: center;">
                            <h3>Time</h3>
                            <p>This is the date</p>
                        </div>
                    </div>

                    <!-- Add as many sidebar items as needed -->
                </div>
            </div>                
        </div>
    </div>
    </div>
    <!-- Hero End -->



<!-- Events 1 start -->

<div class="container my-5 py-5 bg-secondary text-white position-relative rounded">
    <!-- Event Header -->
    <div class="position-absolute top-0 start-50 " style="transform: translate(-50%, -50%);">
        <button class="btn btn-secondary text-white fw-bold rounded">Upcoming Event</button>
    </div>

    <div class="row g-5 align-items-center">
        <!-- Event Image Section -->
        <div class="col-md-6">
            <div class="position-relative">
                <img src="{% static 'media/event2.jpg' %}" class="img-fluid rounded event-img w-80 h-80" alt="Event Image" style="object-fit: cover;">
            </div>
        </div>

        <!-- Event Details Section -->
        <div class="col-md-6">
            <div class="d-flex mb-3">
                <div class="text-center me-4">
                    <div class="display-6" id="days">00</div>
                    <div>Days</div>
                </div>
                <div class="text-center me-4">
                    <div class="display-6" id="hours">00</div>
                    <div>Hr</div>
                </div>
                <div class="text-center me-4">
                    <div class="display-6" id="minutes">00</div>
                    <div>Min</div>
                </div>
                <div class="text-center">
                    <div class="display-6" id="seconds">00</div>
                    <div>Sec</div>
                </div>
                <span class="ms-3 align-self-center fs-5 fw-bold">Remaining</span>
            </div>

            <h2 class="fw-bold">We are going to arrange a get together!</h2>
            <p class="fs-5">Hello everybody, Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
            <a href="#" class="btn btn-outline-light fw-bold">View all events</a>
        </div>
    </div>
</div>


<!-- Events end -->

<!-- Events 2 -->
<div class="container my-5 py-5 bg-secondary text-white position-relative rounded">
    {% if event.is_event_active %}
        <!-- Event Header -->
        <div class="position-absolute top-0 start-50" style="transform: translate(-50%, -50%);">
            <button class="btn btn-secondary rounded-pill text-whote fw-bold rounded p-3 fs-4" style="font-style: oblique;">Upcoming Event</button>
        </div>

        <div class="row g-5 align-items-center">
            <!-- Event Image Section -->
            <div class="col-md-6">
                <div class="position-relative">
                    <img src="{{ event.image.url }}" class="img-fluid rounded event-img w-100 h-100" alt="Event Image" style="object-fit: cover;">
                </div>
            </div>

            <!-- Event Details Section -->
            <div class="col-md-6">
                <div class="d-flex mb-3">
                    <div class="text-center me-4">
                        <div class="display-6" id="days">00</div>
                        <div>Days</div>
                    </div>
                    <div class="text-center me-4">
                        <div class="display-6" id="hours">00</div>
                        <div>Hr</div>
                    </div>
                    <div class="text-center me-4">
                        <div class="display-6" id="minutes">00</div>
                        <div>Min</div>
                    </div>
                    <div class="text-center">
                        <div class="display-6" id="seconds">00</div>
                        <div>Sec</div>
                    </div>
                    <span class="ms-3 align-self-center fs-5 fw-bold">Remaining</span>
                </div>

                <h2 class="fw-bold">{{ event.title }}</h2>
                <p class="fs-5">{{ event.content }}</p>
                <a href="#" class="btn btn-outline-light fw-bold">View all events</a>
            </div>
        </div>
    {% else %}
        <h2 class="fw-bold text-center">No events</h2>
    {% endif %}
</div>


def homepage(request):
    # Get the landing page text
    landing_page_text = LandingPageText.objects.all()

    # Fetch all upcoming events (events that haven't ended yet)
    events = Event.objects.filter(end_time__gte=timezone.now()).order_by('start_time')

    try:
        # Get the time remaining for the first event if available
        event = events.first()  # Get the first event
        time_remaining = event.time_remaining() if event else None

        # Convert the end time of the first event to a timestamp
        event_end_timestamp = event.end_time.timestamp() if event else None

    except Event.DoesNotExist:
        event = None
        time_remaining = None
        event_end_timestamp = None

    return render(request, 'main/index.html', {
        'events': events,  # Pass multiple events here
        'event': event,  # Still pass the first event if needed for other logic
        'event_end_timestamp': event_end_timestamp,  # Timestamp for JS countdown
        'landing_page_text': landing_page_text,
    })
 

    style="background-color: rgba(154, 170, 142, 0.51);"


